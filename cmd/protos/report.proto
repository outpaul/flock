syntax = "proto3";

package main;

service Report {
    rpc Ping(stream PingRequest) returns (stream PingResponse);
    rpc Report(stream ReportRequest) returns (stream ReportResponse);
}

message ReportRequest {
}

message ReportResponse {
    int64 chunks = 1;
    int64 tables = 2;
    int64 percentage = 3;
}

message PingRequest {
    oneof value {
        Server server = 1;
        ClientDB clientDB = 2;
        ServerDB serverDB = 3;
    }
}

message PingResponse {
    bool success = 1;
}

message Server {
    string ip = 1;
    string port = 2;
}

message ClientDB {
    string url = 1;
    string database = 2;
}

message ServerDB {
    string url = 1;
    string database = 2;
}